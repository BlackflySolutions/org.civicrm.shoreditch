/* stylelint-disable max-nesting-depth, selector-max-compound-selectors, selector-no-qualifying-type, selector-max-id */

/**
 * Applies proper shadows to the <h3> + <div class="crm-block"> pair.
 *
 * @NOTE
 * If you apply shadows to these elements directly (not via :before pseudoclass),
 * then the shadows will overlap. The method makes it visually look like there is
 * just a single shadow underneath the pair.
 */

// Need that otherwise shadows will be cropped on the top and the bottom
#crm-main-content-wrapper {
  position: relative;
  z-index: 0;
}

h3,
h3 + .crm-block {
  // Discard direct shadows
  box-shadow: none !important;
  position: relative;

  &::before {
    bottom: 0;
    box-shadow: $box-shadow;
    content: '';
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    // This is needed to place the shadows underneath so they do not overlap
    z-index: -1;
  }
}

h3::before {
  border-radius: #{$crm-block-border-radius} #{$crm-block-border-radius} 0 0 !important;
}

h3 + .crm-form-block {
  &,
  &::before {
    border-radius: 0 0 #{$crm-block-border-radius} #{$crm-block-border-radius} !important;
  }

  .crm-submit-buttons {
    // Need to discard the background otherwise this block will have sharp edges
    background-color: transparent !important;
  }
}
